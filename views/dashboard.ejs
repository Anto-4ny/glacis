<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Glacis || Dashboard</title>
    <meta name="description" content="Glacis offers an online earning platform where users make money by inviting others, helping verify new users, selling ebooks, advertising, and more.">
    <meta property="og:title" content="Glacis">
    <meta property="og:description" content="Join Glacis to earn money through various online opportunities including referrals, verifications, and advertising.">
    <meta property="og:image" content="/images/glacis-logo.jpg">
    <meta property="og:url" content="https://glacis.antocapteknologies.com">

    <!-- Use only one Font Awesome import -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Favicon -->
    <link rel="icon" href="/images/glacis-logo.jpg" type="image/x-icon">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js CDN (Load this in the <head> or before your script) -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>

<style>
#payment-popup {
    z-index: 1000 !important;
    display: flex !important;
}
</style>
      
 <!-- Header -->
<header class="flex items-center justify-between p-4 bg-black shadow-md fixed w-full top-0 z-50">
    <a href="/" class="flex items-center">
        <img id="logo" src="/images/glacis-logo.jpg" alt="Glacis Logo" class="h-10">
    </a>

   <!-- Desktop Navigation -->
<nav class="hidden lg:flex space-x-6 bg-black px-6 py-3 shadow-lg rounded-lg">
    <a href="dashboard" class="text-white font-semibold hover:text-blue-400 transition duration-300 shadow-md">Dashboard</a>
    <a href="earnings" class="text-white font-semibold hover:text-blue-400 transition duration-300 shadow-md">Earnings</a>
    <a href="help" class="text-white font-semibold hover:text-blue-400 transition duration-300 shadow-md">Help</a>
    <a href="validator" class="text-white font-semibold hover:text-blue-400 transition duration-300 shadow-md">Validator</a>
    <a href="referral" class="text-white font-semibold hover:text-blue-400 transition duration-300 shadow-md">Referrals</a>
    <a href="withdraw" class="text-white font-semibold hover:text-blue-400 transition duration-300 shadow-md">Withdraw</a>
    <a href="about" class="text-white font-semibold hover:text-blue-400 transition duration-300 shadow-md">About Us</a>
    <a href="help" class="text-white font-semibold hover:text-blue-400 transition duration-300 shadow-md">Help</a>
    <a href="profile" class="text-white font-semibold hover:text-blue-400 transition duration-300 shadow-md">Profile</a>
    <button id="logout-button" class="text-red-500 font-semibold hover:text-red-700 transition duration-300 shadow-md">Log Out</button>
</nav>

    <!-- Mobile Navigation Icon -->
    <button id="hamburger-icon" class="text-gray-600 text-xl lg:hidden">
        <i class="fas fa-bars"></i>
    </button>
</header>

<!-- Overlay -->
<div id="overlay" class="fixed inset-0 bg-black bg-opacity-50 hidden lg:hidden"></div>

<!-- Mobile Navigation -->
<nav id="mobile-nav" class="fixed left-0 top-0 h-full w-1/4 bg-white shadow-lg transform -translate-x-full transition-transform lg:hidden z-50">
    <div class="p-4 border-b flex justify-between items-center">
        <h3 class="text-lg font-semibold">Menu</h3>
        <button id="close-nav" class="text-gray-600 text-xl"><i class="fas fa-times"></i></button>
    </div>
    <div class="p-4 flex flex-col space-y-3">
        <a href="dashboard" class="text-gray-700 hover:text-blue-600">Dashboard</a>
        <a href="earnings" class="text-gray-700 hover:text-blue-600">Earnings</a>
        <a href="validator" class="text-gray-700 hover:text-blue-600">Validator</a>
        <a href="referral" class="text-gray-700 hover:text-blue-600">Referrals</a>
        <a href="withdraw" class="text-gray-700 hover:text-blue-600">Withdraw</a>
        <a href="about" class="text-gray-700 hover:text-blue-600">About Us</a>
        <a href="help" class="text-gray-700 hover:text-blue-600">Help</a>
        <a href="profile" class="text-gray-700 hover:text-blue-600">Profile</a>
        <button id="logout-button" class="text-red-600 hover:text-red-800">Log Out</button>
    </div>
</nav>

<body class="bg-gray-100 font-sans mt-20">
      <!-- <div id="payment-popup" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden transition-opacity duration-300 ease-in-out">
    <div class="relative bg-white p-6 rounded-2xl shadow-2xl max-w-lg w-full sm:w-4/5 md:w-2/3 lg:w-1/3 h-[85vh] overflow-y-auto border border-gray-200">
        
        
        <button id="close-payment-popup" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition">
            ✖
        </button>

    
        <h2 class="text-2xl font-bold text-center text-gray-800 mb-4">User Registration & Activation</h2>
        <p class="text-gray-500 text-sm text-center mb-6">
            To fully activate your account, choose one of the following options:
        </p>

        
        <div class="space-y-4">
            <div class="border p-4 rounded-lg bg-gray-50 hover:bg-gray-100 transition">
                <h3 class="text-lg font-semibold text-gray-800">Common Member</h3>
                <p class="text-gray-500 text-sm">Register with a one-time fee of <strong class="text-green-600">$33</strong> to start earning.</p>
            </div>

            <div class="border p-4 rounded-lg bg-gray-50 hover:bg-gray-100 transition">
                <h3 class="text-lg font-semibold text-gray-800">Validator</h3>
                <p class="text-gray-500 text-sm">Register with a one-time fee of <strong class="text-blue-600">$100</strong> to verify payments and earn extra.</p>
            </div>
        </div>

        
        <h3 class="text-lg font-semibold mt-6">Payment Methods</h3>
        <p class="text-gray-500 text-sm">Payments are done manually via <strong>Binance, OKX, Metamask, and TrustWallet</strong>.</p>

        
        <h3 class="text-lg font-semibold mt-6">Payment Submission</h3>
        <p class="text-gray-600 text-sm mb-4">Submit your payment details for verification:</p>

        <form id="payment-form" class="space-y-4">
            <div>
                <label class="block text-sm font-medium text-gray-700">Transaction Hash (TXID)</label>
                <input type="text" id="txid" placeholder="Enter TXID" class="w-full p-3 border rounded-lg focus:ring focus:ring-blue-300 transition">
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700">Upload Transaction Screenshot</label>
                <input type="file" id="screenshot" class="w-full p-3 border rounded-lg focus:ring focus:ring-blue-300 transition">
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700">Wallet Address Used</label>
                <input type="text" id="wallet-address" placeholder="Enter Wallet Address" class="w-full p-3 border rounded-lg focus:ring focus:ring-blue-300 transition">
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700">Date & Time of Payment</label>
                <input type="datetime-local" id="payment-date" class="w-full p-3 border rounded-lg focus:ring focus:ring-blue-300 transition">
            </div>

            
            <button type="submit" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition text-lg font-semibold">
                Submit for Verification
            </button>
        </form>
    </div>
</div>-->

<!-- Trigger Button -->
<button id="open-payment-popup" class="mt-6 bg-green-600 text-white py-3 px-6 rounded-lg hover:bg-green-700 transition font-semibold">
    Activate Now
</button>


   
    <section id="dashboard" class="p-6 bg-gray-100 min-h-screen">
        <!-- Dashboard Title -->
        <div class="bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900 shadow-2xl rounded-2xl p-8 mb-8 text-center">
            <h2 class="text-3xl text-white font-extrabold tracking-wide uppercase py-4 shadow-lg rounded-xl 
                       bg-gradient-to-r from-blue-500 to-purple-600 inline-block px-6">
                Dashboard
            </h2>
        </div> 

         <!-- Notification Bar -->
         <div id="notification-bar" class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-6 relative shadow-lg rounded-md">
            <p class="font-semibold">Welcome back</p>
            <span class="absolute top-2 right-4 cursor-pointer text-xl font-bold" id="close-notification">&times;</span>
        </div>
    
        <!-- Welcome Box -->
        <div class="bg-white shadow-2xl rounded-2xl p-8 mb-6 text-center">
            <h2 class="text-2xl font-bold text-gray-800">It's good to have you on board, <span class="text-blue-600">Buddy</span></h2>
        </div>

        <section id="dashboard-info" class="p-6 bg-gray-100 min-h-screen">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- User Registration & Activation -->
                <div class="bg-white shadow-lg rounded-xl p-6 border-l-4 border-blue-500">
                    <h3 class="text-xl font-bold text-gray-800 mb-2">User Registration & Activation</h3>
                    <p class="text-gray-600">Register as a common member with <strong>$33</strong> or as a validator with <strong>$100</strong>.</p>
                </div>
                
                <!-- Validator Responsibilities -->
                <div class="bg-white shadow-lg rounded-xl p-6 border-l-4 border-yellow-500">
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Validator Responsibilities</h3>
                    <p class="text-gray-600">Validators verify user payments and earn <strong>$3 per validation</strong>. At least two validators must approve a payment.</p>
                </div>
                
                <!-- Referral System -->
                <div class="bg-white shadow-lg rounded-xl p-6 border-l-4 border-green-500">
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Referral Earnings</h3>
                    <ul class="list-disc pl-5 text-gray-600">
                        <li>Direct referrals earn <strong>$10</strong> per activated account.</li>
                        <li>Level 2 referrals earn <strong>$3</strong> per activation.</li>
                        <li>If a referral registers as a validator, earn <strong>$30</strong> (direct) or <strong>$5</strong> (level 2).</li>
                    </ul>
                </div>
                
                <!-- Payment System -->
                <div class="bg-white shadow-lg rounded-xl p-6 border-l-4 border-purple-500">
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Payment System</h3>
                    <p class="text-gray-600">Payments are done manually through <strong>Binance, OKX, Metamask, Trust Wallet</strong>.</p>
                </div>
                
                <!-- Transaction Proof Submission -->
                <div class="bg-white shadow-lg rounded-xl p-6 border-l-4 border-red-500">
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Transaction Proof Submission</h3>
                    <ul class="list-disc pl-5 text-gray-600">
                        <li>Transaction Hash (TXID)</li>
                        <li>Screenshot of completed transaction</li>
                        <li>Payment method used</li>
                        <li>Sender and receiver wallet addresses</li>
                    </ul>
                </div>
                
                <!-- Dashboard Features -->
                <div class="bg-white shadow-lg rounded-xl p-6 border-l-4 border-indigo-500">
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Dashboard Features</h3>
                    <ul class="list-disc pl-5 text-gray-600">
                        <li>Account activation & verification status</li>
                        <li>Unique referral link</li>
                        <li>Validator panel for pending verifications</li>
                        <li>Wallet withdrawals (min: $1, 24hr approval)</li>
                    </ul>
                </div>
            </div>
        </section>
        
        <!-- Earnings Graph -->
        <div class="bg-white shadow-2xl rounded-2xl p-8 mt-6">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">Earnings Overview</h3>
            <canvas id="earningsChart"></canvas>
        </div>
        
        <!-- Additional Graphs Section -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
            <div class="bg-white shadow-2xl rounded-2xl p-8">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">Earnings Bar Chart</h3>
                <canvas id="barChart"></canvas>
            </div>
            <div class="bg-white shadow-2xl rounded-2xl p-8">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">Earnings Distribution</h3>
                <canvas id="doughnutChart"></canvas>
            </div>
            <div class="bg-white shadow-2xl rounded-2xl p-8">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">Earnings Histogram</h3>
                <canvas id="histogramChart"></canvas>
            </div>
        </div>
    
        <!-- Referral Section -->
        <div class="bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900 shadow-2xl rounded-2xl p-8 mt-6 max-w-3xl mx-auto">
            <h3 class="text-lg font-bold text-white mb-4">Your Referral Link</h3>
            <div class="flex items-center space-x-4">
                <p id="referral-link" class="flex-grow text-white bg-gray-700 px-4 py-2 rounded-md overflow-hidden text-ellipsis whitespace-nowrap border border-gray-500">Your Referral Link Here</p>
                <button id="copy-link-button" class="px-4 py-2 bg-blue-600 text-white rounded-md shadow hover:bg-blue-700">Copy</button>
                <a id="whatsapp-share-button" target="_blank" class="px-4 py-2 bg-green-500 text-white rounded-md shadow hover:bg-green-600">
                    <i class="fab fa-whatsapp text-lg"></i>
                </a>
            </div>
            
            <!-- Referred Friends Section -->
            <h3 class="text-lg font-bold text-white mt-6">Your Referred Friends</h3>
            <div class="overflow-x-auto mt-4">
                <table class="w-full border-collapse text-sm text-left">
                    <thead>
                        <tr class="bg-gray-700 border-b text-white">
                            <th class="p-3">Email</th>
                            <th class="p-3">Status</th>
                        </tr>
                    </thead>
                    <tbody id="referred-users-list" class="bg-gray-800 text-white">
                        <!-- Referred users will be dynamically inserted here -->
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <section>
        <!-- Social Media Links -->
    <div class="bg-white shadow-md rounded-lg p-6 mt-6 max-w-3xl mx-auto text-center">
        <h3 class="text-lg font-semibold text-gray-800 mb-4">Follow Us on Social Media</h3>
        <div class="flex justify-center space-x-6">
            <a href="https://t.me/yourchannel" target="_blank" class="text-blue-500 text-2xl hover:text-blue-700">
                <i class="fab fa-telegram-plane"></i>
            </a>
            <a href="https://x.com/GlaciasO25?t=O5kjLwkcjx_dVI_KsOSmwQ&s=09" target="_blank" class="text-blue-400 text-2xl hover:text-blue-600">
                <i class="fab fa-twitter"></i>
            </a>
            <a href="https://www.facebook.com/profile.php?id=100076146367834" target="_blank" class="text-blue-600 text-2xl hover:text-blue-800">
                <i class="fab fa-facebook"></i>
            </a>
            <a href="https://www.instagram.com/tonyasembo?igsh=YzljYTk1ODg3Zg==" target="_blank" class="text-pink-500 text-2xl hover:text-pink-700">
                <i class="fab fa-instagram"></i>
            </a>
            <a href="https://www.tiktok.com/@antonytheeson?_t=ZM-8uB5WCMpRBd&_r=1" target="_blank" class="text-black text-2xl hover:text-gray-700 mx-2">
                <i class="fab fa-tiktok"></i>
            </a>
            
        </div>
    </div>
    </section>
  
    <div class="Button">
        <a href="validator">
            <p class="post-btn">
                <i class="fa fa-plus-square"></i>
            </p>
        </a>
    </div>
    
    <footer class="bg-gray-900 text-white text-center py-4">
        <p class="copyright-text text-sm">
            &copy; 2025 <span class="font-bold">Glacis</span>. All rights reserved.
        </p>
        <p class="text-xs mt-1">
            Designed by 
            <a href="https://antocapteknologies.com" class="text-blue-400 hover:text-blue-300 font-semibold" target="_blank">
                Antocap Teknologies
            </a>
        </p>
    </footer>    
      
        <script type="module" src="https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js"></script>
        <script type="module" src="https://www.gstatic.com/firebasejs/10.12.5/firebase-analytics.js"></script>
        <script type="module" src="https://www.gstatic.com/firebasejs/10.12.5/firebase-auth.js"></script>
        <script type="module" src="https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore.js"></script>
        <script type="module" src="https://www.gstatic.com/firebasejs/10.12.5/firebase-storage.js"></script>
        
       <!-- Your custom script -->
<script type="module" src="script.js"></script>
<script type="module">
 import { auth } from './script.js';

        import { ensureAuthenticated } from "./script.js";
        
        document.addEventListener("DOMContentLoaded", () => {
            ensureAuthenticated(); 
        });
    

document.addEventListener("DOMContentLoaded", () => {
    const popup = document.getElementById("payment-popup");
    const errorMessageDiv = document.getElementById("error-message");
    const payBtn = document.getElementById("pay-btn");
    const closePopupBtn = document.getElementById("close-payment-popup");

    // ✅ Check if elements exist before proceeding
    if (!popup || !payBtn || !closePopupBtn) {
        console.error("❌ Error: Required elements not found in the DOM!");
        return;
    }

    // ✅ Function to show the popup
    const showPaymentPopup = () => {
        popup.classList.remove("hidden");
        popup.classList.add("flex");
        popup.setAttribute("aria-hidden", "false"); 
        document.body.style.overflow = "hidden"; // Prevent background scrolling
        console.log("✅ Payment popup is now visible");
    };

    // ✅ Function to hide the popup
    const hidePaymentPopup = () => {
        popup.classList.add("hidden");
        popup.classList.remove("flex");
        popup.setAttribute("aria-hidden", "true");
        document.body.style.overflow = "auto"; // Restore scrolling
        console.log("✅ Payment popup hidden");
    };

    // ✅ Show the popup only if the user hasn't paid
    const initializeDashboard = () => {
        const paymentStatus = localStorage.getItem("paymentStatus");

        if (!paymentStatus || paymentStatus !== "paid") {
            showPaymentPopup();
        }
    };

    // ✅ Close popup when clicking outside the content area
    popup.addEventListener("click", (event) => {
        if (event.target === popup) {
            hidePaymentPopup();
        }
    });

    // ✅ Close popup when clicking on the close button
    closePopupBtn.addEventListener("click", hidePaymentPopup);

    // ✅ Handle payment submission
    payBtn.addEventListener("click", async () => {
        const txidInput = document.getElementById("txid");
        const screenshotInput = document.getElementById("screenshot");
        const walletAddressInput = document.getElementById("wallet-address");

        if (!txidInput || !screenshotInput || !walletAddressInput) {
            console.error("❌ Error: One or more input fields not found!");
            return;
        }

        const txid = txidInput.value.trim();
        const walletAddress = walletAddressInput.value.trim();
        const user = auth.currentUser;

        // ✅ Clear previous error messages
        errorMessageDiv.classList.add("hidden");
        errorMessageDiv.textContent = "";

        if (!txid || !walletAddress || !screenshotInput.files.length) {
            errorMessageDiv.textContent = "⚠️ All fields are required, including a screenshot.";
            errorMessageDiv.classList.remove("hidden");
            return;
        }

        if (user?.email) {
            try {
                const formData = new FormData();
                formData.append("txid", txid);
                formData.append("walletAddress", walletAddress);
                formData.append("email", user.email);
                formData.append("screenshot", screenshotInput.files[0]);

                // ✅ Disable button to prevent multiple submissions
                payBtn.disabled = true;
                payBtn.textContent = "Submitting...";

                const response = await fetch('/api/submit-payment', {
                    method: 'POST',
                    body: formData,
                });

                payBtn.disabled = false;
                payBtn.textContent = "Submit Payment";

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error || "Submission failed.");
                }

                const data = await response.json();
                alert(data.message || "✅ Payment submitted successfully. Await validation.");

                // ✅ Store payment status to prevent pop-up reappearing
                localStorage.setItem("paymentStatus", "pending");

                // ✅ Clear input fields
                txidInput.value = "";
                walletAddressInput.value = "";
                screenshotInput.value = "";

                hidePaymentPopup();
            } catch (error) {
                errorMessageDiv.textContent = `❌ Error: ${error.message}`;
                errorMessageDiv.classList.remove("hidden");
                console.error("❌ Payment Submission Error:", error);
            }
        } else {
            alert("❌ User not authenticated. Please log in.");
        }
    });

    // ✅ Initialize dashboard on page load
    initializeDashboard();
});

document.getElementById("close-notification").addEventListener("click", function () {
        document.getElementById("notification-bar").style.display = "none";
    });

    document.addEventListener("DOMContentLoaded", function () {
        const ctx1 = document.getElementById("earningsChart").getContext("2d");
        const ctx2 = document.getElementById("barChart").getContext("2d");
        const ctx3 = document.getElementById("doughnutChart").getContext("2d");
        const ctx4 = document.getElementById("histogramChart").getContext("2d");

        const labels = ["Jan", "Feb", "Mar", "Apr", "May", "Jun"];
        const earningsData = [500, 1200, 1800, 2400, 3200, 4100];

        new Chart(ctx1, { type: "line", data: { labels, datasets: [{ label: "Earnings ($)", data: earningsData, borderColor: "#4CAF50", borderWidth: 2, fill: false, tension: 0.4 }] }, options: { responsive: true } });

        new Chart(ctx2, { type: "bar", data: { labels, datasets: [{ label: "Earnings ($)", data: earningsData, backgroundColor: "#ff9800" }] }, options: { responsive: true } });

        new Chart(ctx3, { type: "doughnut", data: { labels, datasets: [{ data: earningsData, backgroundColor: ["#4CAF50", "#ff9800", "#03A9F4", "#E91E63", "#FFC107", "#9C27B0"] }] }, options: { responsive: true } });

        new Chart(ctx4, { type: "bar", data: { labels, datasets: [{ label: "Earnings Distribution", data: earningsData, backgroundColor: "#673AB7" }] }, options: { responsive: true } });
    });


    
  document.addEventListener("contextmenu", function (event) {
    event.preventDefault(); // Disable right-click
  });

  document.addEventListener("keydown", function (event) {
    if (event.ctrlKey && (event.key === "u" || event.key === "U")) {
      event.preventDefault(); // Disable "View Source" (Ctrl + U)
    }
    if (event.ctrlKey && event.shiftKey && event.key === "I") {
      event.preventDefault(); // Disable DevTools (Ctrl + Shift + I)
    }
    if (event.ctrlKey && event.shiftKey && event.key === "J") {
      event.preventDefault(); // Disable DevTools (Ctrl + Shift + J)
    }
    if (event.ctrlKey && event.key === "S") {
      event.preventDefault(); // Disable Save (Ctrl + S)
    }
    if (event.ctrlKey && event.key === "P") {
      event.preventDefault(); // Disable Print (Ctrl + P)
    }
  });


</script>
</body>
</html>
